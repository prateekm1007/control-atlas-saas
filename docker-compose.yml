services:
  brain:
    build: ./backend
    container_name: brain
    ports: ["8000:8000"]
    volumes:
      - nkg_data:/app/nkg
      - ./backend/tos/saas/keys.db:/app/tos/saas/keys.db
    env_file:
      - .env
    restart: unless-stopped

  face:
    build: ./dashboard
    container_name: face
    ports: ["8502:8501"]
    env_file:
      - .env
    environment:
      - BACKEND_URL=http://brain:8000
    depends_on: ["brain"]
    restart: unless-stopped

volumes:
  nkg_data:
